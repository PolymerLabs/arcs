<!--
Copyright (c) 2017 Google Inc. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt
Code distributed by Google as part of this project is also
subject to an additional IP rights grant found at
http://polymer.github.io/PATENTS.txt
-->
<!doctype html>
<html lang="en">
<head>
  <title>Arcs: Chrome Plugin</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

  <link rel="stylesheet" href="index.css">

  <script src="load-browser-state.js"></script>
  <script src="communicate-to-arcs.js"></script>
</head>
<body style="margin: 0px; padding: 0px; overflow: hidden">

<iframe id="arcs-if" 
  frameborder="0" style="overflow:hidden;overflow-x:hidden;overflow-y:hidden;height:100%;width:100%;position:absolute;top:0px;left:0px;right:0px;bottom:0px"
  height="100%" width="100%">
</iframe>

<script>
  chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {
    chrome.tabs.sendMessage(tabs[0].id, {method: "extractEntities"}, response => {

      console.log('popup.html extracted', response);
      chrome.runtime.sendMessage(null, {
        method: 'postSinglePage',
        args: {
          tabId: tabs[0].id,
          entities: response
        },
      });
      populateIframe(document);
    });
  });
</script>

</body>
</html>
