import 'particles/ImageCapture.particle'
import 'particles/MlModelCapture.particle'
import 'particles/ImageProcessSelector.particle'
import 'particles/ImageProcessing.particle'
import 'particles/ImageStyler.particle'

recipe ImageProcessing
  create #volatile as target
  ImageCapture
    image -> target
    consume root
      provide imageView as viewSlot
  create #volatile as classifyTarget
  ImageProcessSelector
    imageToProcess <- target
    imageToClassify -> classifyTarget
    imageToStyle -> styleTarget
    consume selectView as viewSlot
  ImageProcessing
    image <- classifyTarget
  MlModelCapture
    image <- styleTarget
    model -> model
  ImageStyler
    image <- styleTarget
    model <- model


recipe ImageStyler
  create #volatile as image
  create #volatile as model
  ImageCapture
    image -> image
  MlModelCapture
    image <- image
    model -> model
  ImageStyler
    image <- image
    model <- model
