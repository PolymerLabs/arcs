// Tutorial 3: JSON Store
// Loads data stored in a JSON file.

// Defines a new Entity called PersonDetails, with two fields.
schema PersonDetails
  Text name
  Number age

// Creates a data store of type PersonDetails, named PersonToGreetStore (the name is not important, it isn't used anywhere). The data will be
// loaded from the file data.json. This store is tagged with #personToGreet, which lets us reference it in recipes.
store PersonToGreetStore of PersonDetails #personToGreet in 'data.json'

particle JsonStoreParticle in 'json-store.js'
  // This particle has an input parameter called inputData. We can use this parameter in the particle's JavaScript file.
  in PersonDetails inputData
  consume root

recipe JsonStoreRecipe
  // This line connects this recipe to the data store above tagged with #personToGreet. It also creates a local alias for it called "data",
  // which is how we will refer to it inside the scope of this recipe.
  map #personToGreet as data

  JsonStoreParticle
    // Binds the PersonDetails stored in the data store to JsonStoreParticle's inputData parameter.
    inputData <- data

  description `Tutorial 3: JSON Store`
