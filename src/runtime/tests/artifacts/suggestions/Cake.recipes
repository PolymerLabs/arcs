schema Cake
  name: Text
  occasion: Text

particle MakeCake in 'source/MakeCake.js'
  cake: reads Cake {name, occasion}
  item: consumes Slot
    special: provides? Slot {handle: cake}
  description `Make a ${cake} cake`

particle LightCandles in 'source/LightCandles.js'
  // Note: birthday cake should is an input connection.
  // It is only made 'reads writes' to force speculative execution.
  birthdayCake: reads writes Cake {name, occasion}
  candles: consumes Slot #special
  description `Light candles on ${birthdayCake} cake`

resource CakeData
  start
  [
    {
      "name": "Cheesecake",
      "occasion": "anniversary"
    },
    {
      "name": "Chocolate"
    },
    {
      "name": "Tiramisu",
      "occasion": "birthday"
    }
  ]

store ACake of Cake #cake in CakeData

recipe
  cakeHandle: map #cake
  rootSlot: slot #root
  MakeCake
    cake: reads cakeHandle
    item: consumes rootSlot

recipe
  cakeHandle: use #cake
  LightCandles
    birthdayCake: reads cakeHandle

