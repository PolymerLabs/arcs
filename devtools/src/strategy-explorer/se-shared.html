<dom-module id="se-shared-styles">
  <template>
    <style>
      #recipe-box {
        border: 1px solid black;
        box-sizing: border-box;
      }

      #recipe-box:not([valid]) {
        border: 1px solid fuchsia;
      }

      #recipe-box[active] {
        background-color: lightyellow;
      }

      #recipe-box[selected] {
        border: 2px solid green;
        background: #afa;
      }

      #recipe-box[selectedAncestor] {
        border: 1px solid blue;
        background: #ccf;
      }

      #recipe-box[selectedParent] {
        border: 2px solid blue;
        background: #aaf;
      }

      #recipe-box[selectedDescendant] {
        border: 1px solid purple;
        background: #fcf;
      }

      #recipe-box[selectedChild] {
        border: 2px solid purple;
        background: #faf;
      }

      #recipe-box[terminal] {
        border-radius: 20px;
      }

      #recipe-box:not([resolved]) {
        border-style: dashed;
      }

      #recipe-box[combined] {
        background-color: lightgrey;
      }

      [diff='add'] {
        box-shadow: 0 0 2px 2px green;
      }

      [diff='remove'] {
        box-shadow: 0 0 2px 2px red;
      }
    </style>
  </template>
  <script>
    const resolvedResults = function(results) {
      return totalResults(results, r => r.resolved);
    }

    const totalResults = function(results, recipeFilter = (x => true)) {
      return results.reduce((a, b) => a + generationSize(b, recipeFilter), 0);
    }

    const generationSize = function(generation, recipeFilter = (x => true)) {
      return generation.population.reduce((a, b) => a + b.recipes.filter(recipeFilter).length, 0);
    }
  </script>
</dom-module>
